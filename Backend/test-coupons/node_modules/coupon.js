var exports = module.exports = {};

// Format codes to line separated
function formatCodes(codes) {
  var output = '';
  codes.forEach(function(code) {
    output += code + '\n';
  });
  return output;
}

function generateCode(codeLength) {
  var alphabets = 'abcdefghijklmnopqrstuvwxyz';
  var upperAlphabets = alphabets.toUpperCase();
  var numbers = '0123456789';
  var mixedPool = alphabets + upperAlphabets + numbers;
  var code = '';

  for (var i = 1; i <= (codeLength - 2); i++) {
    code += mixedPool[Math.floor((Math.random() * mixedPool.length))];
  }
  return 'MQ' + code;
}

function generateCodes(quantity) {
  var codes = [];
  var code;
  if (quantity > 0) {
    while (codes.length != quantity) {
      code = generateCode(10);
      if (codes.indexOf(code) == -1) {
        codes.push(code);
      }
    }
  }
  return codes;
}

module.exports = {
  generateCodes: generateCodes,
  generateCode: generateCode,
  formatCodes: formatCodes
}
